<!DOCTYPE html> 
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
    <title>Mis Cuentas – Mi App Financiera</title>
</head>
<body>
    <header>
        <div class="perfil">
            <img src="{{ url_for('static', filename='img/user.jpg') }}" alt="Perfil">
            <p>Usuario: {{ session['user'] }}</p>
        </div>
        <h1>Mis Cuentas</h1>
        <nav class="inicio">
            <ul>
                <li><a href="{{ url_for('index') }}">Inicio</a></li>
                <li><a href="{{ url_for('usuario_bp.logout') }}">Cerrar Sesión</a></li>
            </ul>
        </nav>
    </header>

    <main>
        <section id="cuentas" class="lista-cuentas">
            <h2>Lista de Cuentas</h2>
            <ul id="lista-cuentas">
                <!-- Las cuentas se cargarán aquí dinámicamente -->
            </ul>
        </section>
    </main>

    <footer>
        <p>&copy; 2024 Mi App Financiera. Todos los derechos reservados.</p>
    </footer>

    <script>
        // Cargar las cuentas del usuario de manera dinámica
        fetch('{{ url_for("cuenta_rutas.listar_cuentas", usuario_id=session.get("usuario_id")) }}')
            .then(res => res.json())
            .then(data => {
                const ul = document.getElementById('lista-cuentas');
                data.forEach(c => {
                    const li = document.createElement('li');
                    li.textContent = `${c.nombre}: $${c.saldo.toFixed(2)}`;
                    ul.appendChild(li);
                });
            })
            .catch(error => {
                console.error('Error al cargar las cuentas:', error);
            });
    </script>
</body>
</html>